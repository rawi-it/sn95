<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ ÙÙŠ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ÙˆØ·Ù†ÙŠ</title>
  <style>
    :root{ --bg:#003439; --gold:#886C35; --white:#fff; }
    body{
      margin:0; padding:0; background:var(--bg);
      display:flex; justify-content:center; align-items:center; height:100vh;
      font-family:"Tahoma",sans-serif; color:#fff;
    }
    table{ border-collapse:collapse; width:95%; max-width:1000px; height:95%; table-layout:fixed; }
    td{ border:2px solid var(--white); text-align:center; vertical-align:middle; width:33.33%; }
    img{ height:70px; max-width:100%; }
    .gold-box{
      background:var(--gold); border:3px solid var(--white); border-radius:12px;
      color:#fff; padding:20px; box-sizing:border-box; width:100%; max-width:720px; margin:auto;
    }
    .page-title{ font-size:22px; font-weight:bold; text-align:center; margin:0 0 15px; }
    .form-row{ display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap; }
    .input{
      background:rgba(0,0,0,.15); border:2px solid var(--white); border-radius:10px; color:#fff;
      padding:10px 14px; font-size:16px; outline:none; min-width:240px;
    }
    .btn{
      border:none; border-radius:12px; padding:10px 16px; font-size:16px; cursor:pointer;
      color:#003439; background:#fff; font-weight:bold;
    }
    .btn[disabled]{ opacity:.5; cursor:not-allowed; }
    .btn-ghost{ background:transparent; color:#fff; border:2px solid #fff; }
    .q-text{ font-size:18px; font-weight:bold; margin:8px 0 14px; text-align:center; }
    .options{ display:grid; gap:10px; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); }
    .opt{
      background:rgba(0,0,0,.15); border:2px solid #fff; border-radius:12px; padding:10px; text-align:center; cursor:pointer;
      user-select:none;
    }
    .opt.selected{ outline:3px solid #fff; background:rgba(0,0,0,.25); }
    .nav{ display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:14px; flex-wrap:wrap; }
    .progress-bar{ flex:1; height:6px; background:rgba(255,255,255,.3); border-radius:4px; margin:0 8px; position:relative; }
    .progress-fill{ height:100%; background:#fff; border-radius:4px; width:0%; transition:width .25s ease; }
    .result{ text-align:center; line-height:1.8; font-size:18px; }
    .score{ font-size:28px; font-weight:bold; margin-top:6px; }
    .desc{ margin:10px 0; font-size:16px; }
    .share-buttons{ margin-top:16px; display:flex; justify-content:center; gap:10px; flex-wrap:wrap; }
    .share-buttons a{
      text-decoration:none; background:#fff; color:#003439; padding:8px 14px;
      border-radius:10px; font-size:14px; font-weight:bold;
    }
    .footer-text{ font-size:14px; font-weight:bold; color:#fff; text-align:right; padding-right:10px; white-space:nowrap; }
    .counter{ font-size:14px; font-weight:bold; }
  </style>
</head>
<body>
  <table>
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ -->
    <tr>
      <td style="text-align:right;"><img src="images/nd95logo.png" alt="nd95logo"></td>
      <td></td>
      <td style="text-align:left;"><img src="images/moelogo.png" alt="moelogo"></td>
    </tr>

    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ (Ù…Ø¯Ù…Ø¬) -->
    <tr>
      <td colspan="3">
        <div class="gold-box" id="app">
          <!-- ÙˆØ§Ø¬Ù‡Ø© 1 -->
          <div id="view-start">
            <h1 class="page-title">Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ ÙÙŠ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ÙˆØ·Ù†ÙŠ</h1>
            <div class="form-row">
              <input id="username" class="input" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
              <button class="btn" id="btnStart">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
            </div>
          </div>

          <!-- ÙˆØ§Ø¬Ù‡Ø© 2 -->
          <div id="view-quiz" style="display:none;">
            <div class="q-text" id="qText"></div>
            <div class="options" id="options"></div>
            <div class="nav">
              <button class="btn btn-ghost" id="btnPrev">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
              <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
              <button class="btn" id="btnNext">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
          </div>

          <!-- ÙˆØ§Ø¬Ù‡Ø© 3 -->
          <div id="view-result" style="display:none;">
            <h2 class="page-title">Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2>
            <div class="result">
              <div id="rName"></div>
              <div>Ø­Ù‚Ù‚Øª:</div>
              <div class="score" id="rScore">0%</div>
              <div class="desc" id="rDesc"></div>
              <div class="subtext">Ø´Ø§Ø±Ùƒ Ù†ØªÙŠØ¬ØªÙƒ ÙˆØªØ­Ø¯Ù‰ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒâ€¦ Ù…Ù† ÙŠØ¹Ø±Ù Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆØ·Ù† Ø£ÙƒØ«Ø±ØŸ</div>
              <div class="share-buttons">
                <a id="shareWA" target="_blank">Ø´Ø§Ø±Ùƒ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</a>
                <a id="shareTG" target="_blank">Ø´Ø§Ø±Ùƒ Ø¹Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…</a>
              </div>
              <div style="margin-top:12px;">
                <button class="btn btn-ghost" id="btnRetry">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>

    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« -->
    <tr>
      <td class="footer-text">By:Rawiah itMKH</td>
      <td><img src="images/itlogo.png" alt="itlogo"></td>
      <td><span class="counter">Ø§Ù„Ø²ÙˆØ§Ø±: â€”</span></td>
    </tr>
  </table>

  <script>
    const vStart=document.getElementById('view-start');
    const vQuiz=document.getElementById('view-quiz');
    const vResult=document.getElementById('view-result');
    const usernameInput=document.getElementById('username');
    const btnStart=document.getElementById('btnStart');
    const btnPrev=document.getElementById('btnPrev');
    const btnNext=document.getElementById('btnNext');
    const qText=document.getElementById('qText');
    const optionsWrap=document.getElementById('options');
    const progress=document.getElementById('progress');
    const rName=document.getElementById('rName');
    const rScore=document.getElementById('rScore');
    const rDesc=document.getElementById('rDesc');
    const btnRetry=document.getElementById('btnRetry');
    const shareWA=document.getElementById('shareWA');
    const shareTG=document.getElementById('shareTG');

    const baseQuestions=[
      { text:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„ÙˆØ·Ù†ÙŠØ© ÙÙŠ Ø¹Ù‡Ø¯ Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ²", correct:21, distractors:[17,19,23] },
      { text:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„ÙˆØ·Ù†ÙŠØ© ÙÙŠ Ø¹Ù‡Ø¯ Ø§Ù„Ù…Ù„Ùƒ Ø³Ø¹ÙˆØ¯", correct:11, distractors:[9,12,14] },
      { text:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„ÙˆØ·Ù†ÙŠØ© ÙÙŠ Ø¹Ù‡Ø¯ Ø§Ù„Ù…Ù„Ùƒ ÙÙŠØµÙ„", correct:11, distractors:[8,10,13] }
    ];
    function shuffle(arr){ return arr.slice().sort(()=>Math.random()-0.5); }
    let questions=[],current=0,nameVal="",picks=[],score=0;
    function initQuiz(){
      const shuffledQs=shuffle(baseQuestions);
      questions=shuffledQs.map(q=>({text:q.text,correct:q.correct,options:shuffle([q.correct,...q.distractors])}));
      current=0;score=0;picks=new Array(questions.length).fill(null);
    }
    function show(view){
      vStart.style.display=(view==='start')?'block':'none';
      vQuiz.style.display=(view==='quiz')?'block':'none';
      vResult.style.display=(view==='result')?'block':'none';
    }
    function updateProgress(){
      const pct=(current/(questions.length-1))*100;
      progress.style.width=pct+"%";
    }
    function renderQuestion(){
      const q=questions[current];
      qText.textContent=q.text;
      optionsWrap.innerHTML="";
      q.options.forEach(val=>{
        const opt=document.createElement('div');
        opt.className='opt'; opt.textContent=val;
        if(picks[current]===val) opt.classList.add('selected');
        opt.onclick=()=>{
          picks[current]=val;
          [...optionsWrap.children].forEach(c=>c.classList.remove('selected'));
          opt.classList.add('selected');
        };
        optionsWrap.appendChild(opt);
      });
      btnPrev.disabled=current===0;
      btnNext.textContent=(current===questions.length-1)?"Ø¥Ù†Ù‡Ø§Ø¡":"Ø§Ù„ØªØ§Ù„ÙŠ";
      updateProgress();
    }
    function calcScore(){
      let s=0; for(let i=0;i<questions.length;i++){ if(picks[i]===questions[i].correct) s++; }
      return s;
    }
    btnStart.onclick=()=>{
      nameVal=usernameInput.value.trim();
      if(!nameVal){ alert("ÙØ¶Ù„Ø§Ù‹ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹"); return; }
      initQuiz(); show('quiz'); renderQuestion();
    };
    btnPrev.onclick=()=>{ if(current>0){ current--; renderQuestion(); } };
    btnNext.onclick=()=>{
      if(picks[current]===null){ alert("ÙØ¶Ù„Ø§Ù‹ Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„."); return; }
      if(current===questions.length-1){
        score=calcScore();
        const pct=Math.round(score/questions.length*100);
        rName.textContent=nameVal;
        rScore.textContent=pct+"%";
        progress.style.width="100%";

        // Ø§Ù„ÙˆØµÙ Ø­Ø³Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø©
        let desc="";
        if(pct>=90) desc="ğŸ‰ Ø±Ø§Ø¦Ø¹! ÙˆØ·Ù†ÙŠØªÙƒ ÙˆÙ…Ø¹Ø±ÙØªÙƒ Ø¨Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ø´Ø±ÙØ© ğŸ‘";
        else if(pct>=60) desc="ğŸ“š Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§! Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù‚ÙˆÙŠØ©ØŒ Ø²Ø¯Ù‡Ø§ Ø¨Ø§Ù„Ø§Ø·Ù„Ø§Ø¹ Ø£ÙƒØ«Ø± ğŸ¤";
        else if(pct>=30) desc="ğŸ” Ù…ØªÙˆØ³Ø·â€¦ ØªØ­ØªØ§Ø¬ ØªÙ‚Ø±Ø£ ÙˆØªØªØ¹Ø±Ù Ø£ÙƒØ«Ø± Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆØ·Ù† ğŸ‡¸ğŸ‡¦";
        else desc="âš ï¸ Ø±Ø§Ø¬Ø¹ Ù†ÙØ³Ùƒ! ÙˆØ·Ù†Ùƒ ÙŠØ³ØªØ­Ù‚ Ø£Ù† ØªØ¹Ø±Ù ØªØ§Ø±ÙŠØ®Ù‡ ÙˆÙ…Ù†Ø¬Ø²Ø§ØªÙ‡ Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ğŸ’š";
        rDesc.textContent=desc;

        // Ù…Ø´Ø§Ø±ÙƒØ©
        const url="[Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø©]"; // â† Ø¹Ø¯Ù„ÙŠÙ‡ Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙØ¹
        const msg=`Ø£Ù†Ø§ ${nameVal} Ø­Ù‚Ù‚Øª ${pct}% ğŸ‰\nÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ÙˆØ·Ù†ÙŠ ğŸ‡¸ğŸ‡¦\nØ¬Ø§Ù‡Ø² ØªØªØ­Ø¯Ø§Ù†ÙŠØŸ ğŸ‘‡\n${url}`;
        shareWA.href=`https://wa.me/?text=${encodeURIComponent(msg)}`;
        shareTG.href=`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(msg)}`;

        show('result');
        return;
      }
      current++; renderQuestion();
    };
    btnRetry.onclick=()=>{ initQuiz(); usernameInput.value=""; show('start'); };
    show('start');
  </script>
</body>
</html>
